<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-(转载)整理常用正则表达式" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/11/(%E8%BD%AC%E8%BD%BD)%E6%95%B4%E7%90%86%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" class="article-date">
  <time class="dt-published" datetime="2021-03-10T17:17:17.000Z" itemprop="datePublished">2021-03-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/11/(%E8%BD%AC%E8%BD%BD)%E6%95%B4%E7%90%86%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">(转载)整理常用正则表达式</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>转载自：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/pythonywy/p/11369847.html">金振宗</a></p>
<h2 id="常用正则表达式整理"><a href="#常用正则表达式整理" class="headerlink" title="常用正则表达式整理"></a>常用正则表达式整理</h2><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//自然数，包含0和正整数</span></span><br><span class="line">/^[\+]?(([<span class="number">1</span>-<span class="number">9</span>]\d*)|\d)$/,</span><br><span class="line"><span class="comment">// 数字 ---- 正负 小数整数都可以</span></span><br><span class="line">/^[+-]?(?!\.)(\d*)(\.)*(\d+)$/,</span><br><span class="line"><span class="comment">// 数字  ---- 正负 整数</span></span><br><span class="line">/^[+-]?[<span class="number">0</span>-<span class="number">9</span>]*$/,</span><br><span class="line"><span class="comment">// 正整数 </span></span><br><span class="line">/^[+]?[<span class="number">0</span>-<span class="number">9</span>]*[<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*$/,</span><br><span class="line"><span class="comment">//正小数</span></span><br><span class="line">/^[+]?(?!\.)(\d*)(\.)+(\d+)$/,</span><br><span class="line"><span class="comment">// 正数</span></span><br><span class="line">/^[+]?(?!\.)(\d*)(\.)*(\d+)$/,</span><br><span class="line"><span class="comment">//负数</span></span><br><span class="line">/^[-]+(?!\.)(\d+)(\.)*(\d+)$/,</span><br><span class="line"><span class="comment">//负小数</span></span><br><span class="line">/^[-]+(?!\.)(\d+)(\.)+(\d+)$/,</span><br><span class="line"><span class="comment">//负整数</span></span><br><span class="line">/^[-]?[<span class="number">0</span>-<span class="number">9</span>]*[<span class="number">1</span>-<span class="number">9</span>][<span class="number">0</span>-<span class="number">9</span>]*$/,</span><br><span class="line"><span class="comment">//汉字</span></span><br><span class="line">/\p&#123;Unified_Ideograph&#125;/u,</span><br><span class="line"><span class="comment">//emai</span></span><br><span class="line">/^([a-zA-Z0-<span class="number">9</span>]+[_|\_|\.]?)*[a-zA-Z0-<span class="number">9</span>]+@([a-zA-Z0-<span class="number">9</span>]+[_|\_|\.]?)*[a-zA-Z0-<span class="number">9</span>]+\.[a-zA-Z]&#123;<span class="number">2</span>,<span class="number">3</span>&#125;$/,</span><br><span class="line"><span class="comment">//url</span></span><br><span class="line">/^((https|http)?:\/\/)([<span class="number">0</span>-9a-z.]+)(:[<span class="number">0</span>-<span class="number">9</span>]+)?([<span class="regexp">/0-9a-z.]+)?(\?[0-9a-z&amp;=]+)?(#[0-9-a-z]+)?/i</span>,</span><br><span class="line"><span class="string">&quot;https&quot;</span>:<span class="regexp">/^((https)?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&amp;=]+)?(#[0-9-a-z]+)?/i</span>,</span><br><span class="line"><span class="string">&quot;http&quot;</span>:<span class="regexp">/^((http)?:\/\/)([0-9a-z.]+)(:[0-9]+)?([/0-9a-z.]+)?(\?[0-9a-z&amp;=]+)?(#[0-9-a-z]+)?/i</span>,</span><br><span class="line"></span><br><span class="line"><span class="comment">//身份证</span></span><br><span class="line">/[<span class="number">1</span>-<span class="number">9</span>]\d&#123;<span class="number">13</span>,<span class="number">16</span>&#125;[a-zA-Z0-<span class="number">9</span>]&#123;<span class="number">1</span>&#125;/,</span><br><span class="line"><span class="comment">//手机号 不包含固话</span></span><br><span class="line">/^((<span class="number">13</span>[<span class="number">0</span>-<span class="number">9</span>])|(<span class="number">15</span>[^<span class="number">4</span>])|(<span class="number">18</span>[<span class="number">0</span>-<span class="number">9</span>])|(<span class="number">17</span>[<span class="number">0</span>-<span class="number">9</span>])|(<span class="number">147</span>))\d&#123;<span class="number">8</span>&#125;$/,</span><br><span class="line"></span><br><span class="line"><span class="comment">//密码, 字母开头 长度6-18，只能包含字符 数字 和 下划线</span></span><br><span class="line">/^[a-zA-Z]\w&#123;<span class="number">5</span>,<span class="number">17</span>&#125;$/</span><br><span class="line"><span class="comment">//电话号 包含固话 手机 </span></span><br><span class="line">/^(^[<span class="number">1</span>][\d]&#123;<span class="number">10</span>&#125;$)|^([<span class="number">0</span>\+]\d&#123;<span class="number">2</span>,<span class="number">3</span>&#125;-?)?(\d&#123;<span class="number">7</span>,<span class="number">8</span>&#125;)(-?(\d&#123;<span class="number">1</span>,<span class="number">6</span>&#125;))?$/，</span><br><span class="line"><span class="comment">// 匹配指定字符内的内容（不包含指定字符）　　　　</span></span><br><span class="line">/(?&lt;=&lt;#).*?(?=#&gt;)/g;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/11/(%E8%BD%AC%E8%BD%BD)%E6%95%B4%E7%90%86%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/" data-id="ckmn4ygp10001pst74btv1rme" data-title="(转载)整理常用正则表达式" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/" rel="tag">JS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-(转载)Vue依赖注入" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/03/05/(%E8%BD%AC%E8%BD%BD)Vue%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" class="article-date">
  <time class="dt-published" datetime="2021-03-04T18:44:44.000Z" itemprop="datePublished">2021-03-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E4%BC%A0%E5%8F%82/">传参</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/03/05/(%E8%BD%AC%E8%BD%BD)Vue%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/">(转载)Vue依赖注入</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="转载-provide-inject的使用"><a href="#转载-provide-inject的使用" class="headerlink" title="(转载) provide/inject的使用"></a>(<a target="_blank" rel="noopener" href="https://blog.csdn.net/ysj1218/article/details/109495979">转载</a>) provide/inject的使用</h3><p>一般我们父子组件传值是通过props传值，但是如果层级特别深的话，假如仅仅只有最里面一层的子组件需要最外层父组件中的某一个值的话，props传值的话就要一层一层的往外传，子组件修改还要一层一层的往外通知，特别繁琐，也挺烦人的，就一个值传递了整个组件链，如果遇到这种情况我们就可以使用provide和inject。父组件作为其所有子组件的依赖项提供数据，不用管组件层级有多深。</p>
<p>父组件有一个provide选项提供数据，子组件有一个inject选项来使用数据。</p>
<h3 id="1-基础使用："><a href="#1-基础使用：" class="headerlink" title="1. 基础使用："></a>1. 基础使用：</h3><p>在父组件中提供数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = Vue.createApp(&#123;&#125;);</span><br><span class="line">    app.component(<span class="string">&#x27;Parent&#x27;</span>, &#123;</span><br><span class="line">    provide: &#123;</span><br><span class="line">    user: <span class="string">&#x27;Sunny&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在子组件中使用数据：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.component(<span class="string">&#x27;Child&#x27;</span>, &#123;</span><br><span class="line">    inject: [<span class="string">&#x27;user&#x27;</span>],</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.user); <span class="comment">// 输出 Sunny</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>如果提供的数据为父组件中的组件实例属性时，这样则不起作用，要想访问组件实例属性值传给子组件，需要将provide转换为返回对象的函数.比如：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.component(<span class="string">&#x27;Parent&#x27;</span>, &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name: <span class="string">&#x27;Sunny&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">provide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            user: <span class="built_in">this</span>.name</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>这样实现就不用担心可能更改/删除子组件所依赖的某些东西，组件传值看起来更加明确。父组件不需要知道哪些子组件需要使用他提供的实例属性，子组件也不用知道 inject的属性来自哪里。</p>
<h3 id="2-处理响应式数据："><a href="#2-处理响应式数据：" class="headerlink" title="2. 处理响应式数据："></a>2. 处理响应式数据：</h3><p>   如果对于一些更改了provide中提供的属性值，这个值是不会反映到子组件中的，因为在默认情况下provide/inject绑定不是被动绑定，我们可以通过将ref或者reactive对象传递给provide来更改此行为。</p>
<p>在这里我们可以给name分配一个computed属性。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">app.component(<span class="string">&#x27;Parent&#x27;</span>, &#123;</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name: <span class="string">&#x27;Sunny&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">provide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            user: Vue.computed(<span class="function">() =&gt;</span> <span class="built_in">this</span>.name)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>在setup中使用provide时，首先从vue中导入provide。provide可以传两个参数值：name：类型 value：值</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 父组件：</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;child1 :name=<span class="string">&quot;name&quot;</span> /&gt;</span><br><span class="line">&lt;button @click=<span class="string">&quot;changeName&quot;</span>&gt;更改name值&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">import</span> &#123; provide, ref &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line">    <span class="keyword">import</span> Child1 <span class="keyword">from</span> <span class="string">&quot;./modules/Child1&quot;</span>;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">&quot;Provide&quot;</span>,</span><br><span class="line">        <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> name = ref(<span class="string">&quot;child-child-child-child-child-child&quot;</span>);</span><br><span class="line">            <span class="keyword">let</span> changeName = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">                name.value = <span class="string">`this is a change name!!!<span class="subst">$&#123;<span class="built_in">Math</span>.random()&#125;</span>`</span>;</span><br><span class="line">            &#125;;</span><br><span class="line">            provide(<span class="string">&quot;name&quot;</span>, name);</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                name,</span><br><span class="line">                changeName,</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            Child1,</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>子组件使用inject注入：有两个参数：要注入的属性名称，一个默认值(可选)</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 子组件：</span></span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;child4&lt;/div&gt;</span><br><span class="line">&lt;div&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; inject &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">&quot;Child4&quot;</span>,</span><br><span class="line">    <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> name = inject(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            name</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/03/05/(%E8%BD%AC%E8%BD%BD)Vue%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" data-id="ckmn7un3p0009fgt70l941mnb" data-title="(转载)Vue依赖注入" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BC%A0%E5%8F%82/" rel="tag">传参</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-v-html图片溢出" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/27/v-html%E5%9B%BE%E7%89%87%E6%BA%A2%E5%87%BA/" class="article-date">
  <time class="dt-published" datetime="2021-01-26T16:00:00.000Z" itemprop="datePublished">2021-01-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/CSS/">CSS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/27/v-html%E5%9B%BE%E7%89%87%E6%BA%A2%E5%87%BA/">v-html图片溢出</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="关于v-html中存在-lt-img-gt-出现图片溢出所在div或dialog等情况处理"><a href="#关于v-html中存在-lt-img-gt-出现图片溢出所在div或dialog等情况处理" class="headerlink" title="关于v-html中存在&lt;img&gt;出现图片溢出所在div或dialog等情况处理"></a>关于v-html中存在&lt;img&gt;出现图片溢出所在div或dialog等情况处理</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;dialog&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;content&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// css写法</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    <span class="selector-class">.dialog</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1024px</span>; </span><br><span class="line">      <span class="attribute">height</span>: <span class="number">960px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="selector-class">.dialog</span> &gt;&gt;&gt; <span class="selector-tag">img</span>,<span class="selector-tag">p</span>,<span class="selector-tag">span</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// scss写法</span></span><br><span class="line">&lt;style&gt;</span><br><span class="line">    <span class="selector-class">.dialog</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1024px</span>; </span><br><span class="line">      <span class="attribute">height</span>: <span class="number">960px</span>;</span><br><span class="line">      ::v-deep img, ::v-deep p, ::v-deep span &#123;</span><br><span class="line">        width: <span class="number">100%</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/27/v-html%E5%9B%BE%E7%89%87%E6%BA%A2%E5%87%BA/" data-id="ckmmtclbm000mh0t74g2e2oxw" data-title="v-html图片溢出" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-js获取近三个月、近一个月、近一周" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/01/08/js%E8%8E%B7%E5%8F%96%E8%BF%91%E4%B8%89%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E5%91%A8/" class="article-date">
  <time class="dt-published" datetime="2021-01-07T17:13:13.000Z" itemprop="datePublished">2021-01-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/01/08/js%E8%8E%B7%E5%8F%96%E8%BF%91%E4%B8%89%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E5%91%A8/">js获取近三个月、近一个月、近一周</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="记录获取近三个月、近一个月、近一周时间的js方法"><a href="#记录获取近三个月、近一个月、近一周时间的js方法" class="headerlink" title="记录获取近三个月、近一个月、近一周时间的js方法"></a>记录获取近三个月、近一个月、近一周时间的js方法</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;last3Month&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lastMonth&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;lastWeek&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">                    <span class="comment">// 近3个月</span></span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">getLast3Month</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> year = now.getFullYear();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> month = now.getMonth() + <span class="number">1</span>;<span class="comment">//0-11表示1-12月</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> day = now.getDate();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> dateObj = &#123;&#125;;</span></span><br><span class="line"><span class="javascript">                    dateObj.now = year + <span class="string">&#x27;-&#x27;</span> + month + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> nowMonthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">0</span>).getDate();    <span class="comment">//当前月的总天数</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(month - <span class="number">3</span> &lt;= <span class="number">0</span>)&#123; <span class="comment">//如果是1、2、3月，年数往前推一年</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> last3MonthDay = <span class="keyword">new</span> <span class="built_in">Date</span>((year - <span class="number">1</span>), (<span class="number">12</span> - (<span class="number">3</span> - <span class="built_in">parseInt</span>(month))), <span class="number">0</span>).getDate();    <span class="comment">//3个月前所在月的总天数</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(last3MonthDay &lt; day)&#123;    <span class="comment">//3个月前所在月的总天数小于现在的天日期</span></span></span><br><span class="line"><span class="javascript">                    dateObj.last = (year - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + (<span class="number">12</span> - (<span class="number">3</span> - month)) + <span class="string">&#x27;-&#x27;</span> + last3MonthDay;</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = (year - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + (<span class="number">12</span> - (<span class="number">3</span> - month)) + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> last3MonthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(year, (<span class="built_in">parseInt</span>(month) - <span class="number">3</span>), <span class="number">0</span>).getDate();    <span class="comment">//3个月前所在月的总天数</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(last3MonthDay &lt; day)&#123;    <span class="comment">//3个月前所在月的总天数小于现在的天日期</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(day &lt; nowMonthDay)&#123;        <span class="comment">//当前天日期小于当前月总天数,2月份比较特殊的月份</span></span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">3</span>) + <span class="string">&#x27;-&#x27;</span> + (last3MonthDay - (nowMonthDay - day));</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">3</span>) + <span class="string">&#x27;-&#x27;</span> + last3MonthDay;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">3</span>) + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line">                &#125;</span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> dateObj;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                    <span class="comment">// 近一个月</span></span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">getLastMonth</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> year = now.getFullYear();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> month = now.getMonth() + <span class="number">1</span>;<span class="comment">//0-11表示1-12月</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> day = now.getDate();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> dateObj = &#123;&#125;;</span></span><br><span class="line"><span class="javascript">                    dateObj.now = year + <span class="string">&#x27;-&#x27;</span> + month + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> nowMonthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(year, month, <span class="number">0</span>).getDate();    <span class="comment">//当前月的总天数</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(month - <span class="number">1</span> &lt;= <span class="number">0</span>)&#123; <span class="comment">//如果是1月，年数往前推一年&lt;br&gt;　　　　 </span></span></span><br><span class="line"><span class="javascript">                    dateObj.last = (year - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + <span class="number">12</span> + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> lastMonthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(year, (<span class="built_in">parseInt</span>(month) - <span class="number">1</span>), <span class="number">0</span>).getDate();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(lastMonthDay &lt; day)&#123;    <span class="comment">//1个月前所在月的总天数小于现在的天日期</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(day &lt; nowMonthDay)&#123;        <span class="comment">//当前天日期小于当前月总天数</span></span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + (lastMonthDay - (nowMonthDay - day));</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + lastMonthDay;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line">                &#125;</span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> dateObj;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                    <span class="comment">// 近一周</span></span></span><br><span class="line"><span class="javascript">                    <span class="function"><span class="keyword">function</span> <span class="title">getLastWeek</span>(<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> year = now.getFullYear();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> month = now.getMonth() + <span class="number">1</span>;<span class="comment">//0-11表示1-12月</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> day = now.getDate();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> dateObj = &#123;&#125;;</span></span><br><span class="line"><span class="javascript">                    dateObj.now = year + <span class="string">&#x27;-&#x27;</span> + month + <span class="string">&#x27;-&#x27;</span> + day;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(day - <span class="number">7</span> &lt;= <span class="number">0</span>)&#123;   <span class="comment">//如果在当月7日之前</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> lastMonthDay = <span class="keyword">new</span> <span class="built_in">Date</span>(year, (<span class="built_in">parseInt</span>(month) - <span class="number">1</span>), <span class="number">0</span>).getDate();    <span class="comment">//1周前所在月的总天数</span></span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(month - <span class="number">1</span> &lt;= <span class="number">0</span>)&#123; <span class="comment">//如果在当年的1月份</span></span></span><br><span class="line"><span class="javascript">                    dateObj.last = (year - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + <span class="number">12</span> + <span class="string">&#x27;-&#x27;</span> + (<span class="number">31</span> - (<span class="number">7</span> - day));</span></span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + (month - <span class="number">1</span>) + <span class="string">&#x27;-&#x27;</span> + (lastMonthDay - (<span class="number">7</span> - day));</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="javascript">                    dateObj.last = year + <span class="string">&#x27;-&#x27;</span> + month + <span class="string">&#x27;-&#x27;</span> + (day -<span class="number">7</span>);</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span> dateObj;</span></span><br><span class="line">                &#125;</span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> dateObj1 = getLast3Month();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> dateObj2 = getLastMonth();</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> dateObj3 = getLastWeek();</span></span><br><span class="line"><span class="javascript">                    <span class="built_in">window</span>.onload = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> last3Month = <span class="built_in">document</span>.getElementById(<span class="string">&quot;last3Month&quot;</span>).innerHTML = <span class="string">&quot;近三个月：&lt;br&gt;&quot;</span> + dateObj1.now+ + <span class="string">&#x27;&lt;br&gt;&#x27;</span> + dateObj1.last;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> lastMonth = <span class="built_in">document</span>.getElementById(<span class="string">&quot;lastMonth&quot;</span>).innerHTML = <span class="string">&quot;近一个月：&lt;br&gt;&quot;</span> + dateObj2.now + <span class="string">&#x27;&lt;br&gt;&#x27;</span> + dateObj2.last;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> lastWeek = <span class="built_in">document</span>.getElementById(<span class="string">&quot;lastWeek&quot;</span>).innerHTML = <span class="string">&quot;近一周：&lt;br&gt;&quot;</span> + dateObj3.now + <span class="string">&#x27;&lt;br&gt;&#x27;</span> + dateObj3.last;</span></span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/01/08/js%E8%8E%B7%E5%8F%96%E8%BF%91%E4%B8%89%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E5%91%A8/" data-id="ckmn4ygq50014pst78f3zbeyq" data-title="js获取近三个月、近一个月、近一周" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/" rel="tag">JS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-JS优化" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/20/JS%E4%BC%98%E5%8C%96/" class="article-date">
  <time class="dt-published" datetime="2020-09-19T17:16:16.000Z" itemprop="datePublished">2020-09-20</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/JS/">JS</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/09/20/JS%E4%BC%98%E5%8C%96/">$JS优化</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><font color=#999AAA >本文最初发布于 Medium 网站，经原作者授权由 InfoQ 中文站翻译并分享</font></p>
<p>JavaScript 已经成为有史以来最受欢迎的编程语言之一。从 W3Tech 的数据来看，全世界将近 96％的网站都在使用它。关于 Web 有一个关键的事实是，你无法控制访问网站的用户所用设备。当用户访问你的网站时，使用的可能是高端设备也可能是低端设备，网络连接条件也有好有差。这意味着你必须尽可能优化自己的网站，以满足任何用户的需求。<br>附带提一下，请共享和重用你的 JS 组件，以在高质量代码（写起来需要花费时间）和合理的交付时间之间保持适当的平衡。你可以使用 Bit 等流行工具将任何项目中的组件（普通 JS、TS、React、Vue 等）共享到 Bit 的组件中心，用不了多大功夫。</p>
<h3 id="1、删除未使用的代码和功能"><a href="#1、删除未使用的代码和功能" class="headerlink" title="1、删除未使用的代码和功能"></a>1、删除未使用的代码和功能</h3><p>你的应用程序包含的代码越多，就需要将更多的数据传输到客户端。浏览器也需要更多时间来分析和解释代码。<br>有时，你可能打包了很多根本用不到的功能。最好只在开发环境中保留这些额外的代码，而不要将其推送到生产环境中，以免给客户端的浏览器增加负担。<br>要不断问自己，某个功能或代码段是否是必要的。<br>你可以手动移除未使用的代码，也可以使用 Uglify 或谷歌的 Closure Compiler 之类的工具删除它们。你还可以使用一种被称为摇树优化的技术从应用程序中删除未使用的代码。Webpack 这类打包软件提供了这种技术，详情可以参考这里：</p>
<p><a target="_blank" rel="noopener" href="https://www.infoq.cn/article/dcKcJiT8aeEBNZbdotFF">https://www.infoq.cn/article/dcKcJiT8aeEBNZbdotFF</a></p>
<p>如果要删除未使用的 npm 软件包，可以使用命令 npm prune，详细信息参考 NPM 文档。</p>
<p><a target="_blank" rel="noopener" href="https://docs.npmjs.com/cli-commands/prune.html">https://docs.npmjs.com/cli-commands/prune.html</a></p>
<h3 id="2、尽可能的缓存"><a href="#2、尽可能的缓存" class="headerlink" title="2、尽可能的缓存"></a>2、尽可能的缓存</h3><p>缓存可以减少延迟和网络流量，从而减少了显示资源表示所需的时间，以提高网站的速度和性能。缓存可以借助 Cache API 或 HTTP caching 来实现。你可能想知道内容更改时会发生什么。当满足某些条件（例如发布新内容）时，上述缓存机制能够处理和重新生成缓存。</p>
<h3 id="3、避免内存泄漏"><a href="#3、避免内存泄漏" class="headerlink" title="3、避免内存泄漏"></a>3、避免内存泄漏</h3><p>作为一种高级语言，JS 会负责一些底层管理工作，例如内存管理。垃圾回收是大多数编程语言共有的过程。用外行术语来说，垃圾收集就是收集并释放已分配给对象，但目前尚未在程序的任何部分中使用的内存。在 C 这样的编程语言中，开发人员必须使用 malloc() 和 dealloc() 函数来处理内存分配和释放操作。<br>虽然在 JavaScript 中垃圾回收是自动执行的，但在某些情况下它也不是完美的。在 JavaScript ES6 中，引入了 Map 和 Set 及其“weaker”的同级对象。被称为 WeakMap 和 WeakSet 的“较弱”对应项持有对对象的“弱”引用。它们使未引用的值能够被垃圾回收，从而防止内存泄漏。你可以在此处了解有关 WeakMaps 的更多信息：<br><a target="_blank" rel="noopener" href="https://blog.bitsrc.io/understanding-weakmaps-in-javascript-6e323d9eec81">https://blog.bitsrc.io/understanding-weakmaps-in-javascript-6e323d9eec81
</a></p>
<h3 id="4、尽早打破循环"><a href="#4、尽早打破循环" class="headerlink" title="4、尽早打破循环"></a>4、尽早打破循环</h3><p>超大循环肯定会耗费很多的时间，所以你应该尽早打破这些超大循环。你可以用 break 关键字和 continue 关键字来做这件事，从而编写更高效的代码。<br>在下面的示例中，如果你没有从循环中 break，则你的代码将循环运行 1000000000 （10亿）次，显然会过载的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000000</span>).fill(<span class="string">&#x27;----&#x27;</span>);</span><br><span class="line">arr[<span class="number">970</span>] = <span class="string">&#x27;found&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line"><span class="keyword">if</span> (arr[i] === <span class="string">&#x27;found&#x27;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;Found&quot;</span>);</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在下面的示例中，如果你在循环不符合你的条件时没有 continue，则你仍将运行该函数 1000000000 次。我们仅在数组元素处于偶数位置时处理它。这将循环执行减少了近一半。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">1000000000</span>).fill(<span class="string">&#x27;----&#x27;</span>);</span><br><span class="line">arr[<span class="number">970</span>] = <span class="string">&#x27;found&#x27;</span>;</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; arr.length; i++) &#123;</span><br><span class="line">    <span class="keyword">if</span>(i%<span class="number">2</span>!=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;;</span><br><span class="line">    process(arr[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>你可以在此处详细了解循环和性能的关系：</p>
<p><a target="_blank" rel="noopener" href="https://www.oreilly.com/library/view/high-performance-javascript/9781449382308/ch04.html">https://www.oreilly.com/library/view/high-performance-javascript/9781449382308/ch04.html
</a></p>
<h3 id="5、最小化变量计算的次数"><a href="#5、最小化变量计算的次数" class="headerlink" title="5、最小化变量计算的次数"></a>5、最小化变量计算的次数</h3><p>为了减少计算变量的次数，可以使用闭包。通俗来说，JavaScript 中的闭包使你可以从内部函数访问外部函数作用域。每次创建函数（不调用）时都会创建闭包。内部函数将有权访问外部作用域的变量，即使在返回外部函数之后也是如此。<br>我们来看两个例子。这些示例均来自 Bret 的博客。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findCustomerCity</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> texasCustomers = [<span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;Ludwig&#x27;</span>, <span class="string">&#x27;Kate&#x27;</span>];</span><br><span class="line">    <span class="keyword">const</span> californiaCustomers = [<span class="string">&#x27;Wade&#x27;</span>, <span class="string">&#x27;Lucie&#x27;</span>,<span class="string">&#x27;Kylie&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> texasCustomers.includes(name) ? <span class="string">&#x27;Texas&#x27;</span> :</span><br><span class="line">    californiaCustomers.includes(name) ? <span class="string">&#x27;California&#x27;</span> : <span class="string">&#x27;Unknown&#x27;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果你多次调用上面的函数，那么每次都会创建一个新对象。每次调用时，变量 texasCustomers 和 californiaCustomers 都会导致不必要的内存重分配。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findCustomerCity</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> texasCustomers = [<span class="string">&#x27;John&#x27;</span>, <span class="string">&#x27;Ludwig&#x27;</span>, <span class="string">&#x27;Kate&#x27;</span>];</span><br><span class="line">    <span class="keyword">const</span> californiaCustomers = [<span class="string">&#x27;Wade&#x27;</span>, <span class="string">&#x27;Lucie&#x27;</span>,<span class="string">&#x27;Kylie&#x27;</span>];</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">name</span> =&gt;</span> texasCustomers.includes(name) ? <span class="string">&#x27;Texas&#x27;</span> :</span><br><span class="line">    californiaCustomers.includes(name) ? <span class="string">&#x27;California&#x27;</span> : <span class="string">&#x27;Unknown&#x27;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">let</span> cityOfCustomer = findCustomerCity();</span><br><span class="line">cityOfCustomer(<span class="string">&#x27;John&#x27;</span>);<span class="comment">//Texas</span></span><br><span class="line">cityOfCustomer(<span class="string">&#x27;Wade&#x27;</span>);<span class="comment">//California</span></span><br><span class="line">cityOfCustomer(<span class="string">&#x27;Max&#x27;</span>);<span class="comment">//Unknown</span></span><br></pre></td></tr></table></figure>

<p>在上面的示例中，借助于闭包，返回到变量 cityOfCustomer 的内部函数可以访问外部函数 findCustomerCity() 的常量。而且，每当以传递的名称作为参数调用内部函数时，都无需再次实例化常量。要了解关于闭包的更多信息，建议你阅读 Prashant 的博客文章：</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/@prashantramnyc/javascript-closures-simplified-d0d23fa06ba4">https://medium.com/@prashantramnyc/javascript-closures-simplified-d0d23fa06ba4
</a></p>
<h3 id="6、尽量减少-DOM-访问"><a href="#6、尽量减少-DOM-访问" class="headerlink" title="6、尽量减少 DOM 访问"></a>6、尽量减少 DOM 访问</h3><p>与其他 JavaScript 语句相比，访问 DOM 的速度很慢。如果你对 DOM 进行更改，触发了布局的重新绘制，那么就得等好一阵子了。<br>为了减少访问 DOM 元素的次数，请先访问一次，然后将其用作局部变量。完成需求后，请一定将其设置为 null 来移除该变量的值。这将防止内存泄漏，因为这会触发垃圾回收过程。</p>
<h3 id="7、压缩文件"><a href="#7、压缩文件" class="headerlink" title="7、压缩文件"></a>7、压缩文件</h3><p>通过压缩方法（例如 Gzip）可以减小 JavaScript 文件的大小。较小的文件会提升你的网站性能，因为浏览器只需下载较小的资产即可。<br>这类压缩手段最多可以减少 80％的文件大小。在此处阅读有关压缩的更多信息：</p>
<p><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer#text_compression_with_gzip">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer#text_compression_with_gzip
</a></p>
<h3 id="6、尽量减少-DOM-访问-1"><a href="#6、尽量减少-DOM-访问-1" class="headerlink" title="6、尽量减少 DOM 访问"></a>6、尽量减少 DOM 访问</h3><p>与其他 JavaScript 语句相比，访问 DOM 的速度很慢。如果你对 DOM 进行更改，触发了布局的重新绘制，那么就得等好一阵子了。<br>为了减少访问 DOM 元素的次数，请先访问一次，然后将其用作局部变量。完成需求后，请一定将其设置为 null 来移除该变量的值。这将防止内存泄漏，因为这会触发垃圾回收过程。</p>
<h3 id="8、缩小最终代码"><a href="#8、缩小最终代码" class="headerlink" title="8、缩小最终代码"></a>8、缩小最终代码</h3><p>有人认为缩小和压缩是相同的，其实不然。在压缩中，我们使用特殊算法来改变文件的输出大小；在缩小时，我们需要删除 JavaScript 文件中的注释和多余的空格。可以在网上找到许多工具和软件包来帮助完成这一过程。缩小已成为页面优化的标准做法，也是前端优化的主要步骤之一。<br>缩小可以让文件大小最多减少 60％。你可以在此处阅读有关缩小的更多信息：</p>
<p><a target="_blank" rel="noopener" href="https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer#minification_preprocessing_context-specific_optimizations">https://developers.google.com/web/fundamentals/performance/optimizing-content-efficiency/optimize-encoding-and-transfer#minification_preprocessing_context-specific_optimizations</a></p>
<h3 id="9、使用-Throttle-和-Debounce"><a href="#9、使用-Throttle-和-Debounce" class="headerlink" title="9、使用 Throttle 和 Debounce"></a>9、使用 Throttle 和 Debounce</h3><p>我们可以使用 Throttle（节流）和 Debounce（防抖）这两种技术来严格控制代码需要处理事件的次数。<br>节流是指定函数可以超时的最大次数。例如，“每 1000 毫秒最多执行一次 onkeyup 事件函数”。也就是说哪怕你每秒敲 20 个键，该事件每秒也只会触发一次。这将减少代码的负担。<br>另一方面，防抖是指定自上次执行相同函数以来再次运行该函数的最短持续时间。换句话说，“上次调用函数后过最少 600 毫秒才执行此函数”。要了解有关节流和防抖的更多信息，这里有一篇快速入门：</p>
<p><a target="_blank" rel="noopener" href="https://css-tricks.com/the-difference-between-throttling-and-debouncing/">https://css-tricks.com/the-difference-between-throttling-and-debouncing/</a></p>
<p>你可以实现自己的防抖和节流函数，也可以从 Lodash 和 Underscore 之类的库中导入它们。</p>
<h3 id="11、使用异步代码防止线程阻塞"><a href="#11、使用异步代码防止线程阻塞" class="headerlink" title="11、使用异步代码防止线程阻塞"></a>11、使用异步代码防止线程阻塞</h3><p>你应该知道 JavaScript 默认情况下是同步的和单线程的。但是在某些情况下，你的代码需要很大的计算量。代码本质上是同步的，意味着一段代码运行时将阻止其他代码语句运行，直到前者完成执行为止。这会降低整体性能。<br>但是我们可以通过异步代码来避免这种情况。异步代码以前以回调的形式编写，但是 ES6 引入了一种处理异步代码的新样式。这种新样式被称为 Promise。你可以在 MDN 的官方文档中了解有关回调和 Promise 的更多信息。</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing">https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing</a></p>
<p>可是等等……</p>
<p>JavaScript 默认情况下是同步的，并且也是单线程的。<br>如何在单个线程上运行异步代码呢？这是很多人感到困惑的地方。做到这一点，主要依赖运行在浏览器后台的 JavaScript 引擎。JavaScript 引擎是执行 JavaScript 代码的计算机程序或解释器。JavaScript 引擎可以用多种语言编写。例如，支持 Chrome 浏览器的 V8 引擎是用 C++ 编写的，而支持 Firefox 浏览器的 SpiderMonkey 引擎是用 C 和 C++ 编写的。<br>这些 JavaScript 引擎可以在后台处理任务。根据 Brian 的说法，调用栈可以识别 Web API 的函数，并将其交给浏览器处理。浏览器完成这些任务后，它们将返回并作为回调被推上堆栈。<br>你可能想知道 Node.js 是怎么做这些工作的，毕竟它没有浏览器的帮助。实际上，支持 Chrome 的那个 V8 引擎也是 Node.js 背后的支撑。这里有 Salil 的一篇很棒的博客文章，解释了 Node 生态系统中的这一过程。</p>
<p><a target="_blank" rel="noopener" href="https://medium.com/better-programming/is-node-js-really-single-threaded-7ea59bcc8d64">https://medium.com/better-programming/is-node-js-really-single-threaded-7ea59bcc8d64</a></p>
<h3 id="12、使用代码拆分"><a href="#12、使用代码拆分" class="headerlink" title="12、使用代码拆分"></a>12、使用代码拆分</h3><p>如果你有使用 Google Light House 的经验，肯定会熟悉一种称为“first contentful paint”的指标。它是 Lighthouse 报告的 Performance 部分中跟踪的六个指标之一。<br>First Contentful Paint（FCP）衡量用户转到你的页面后浏览器渲染第一段 DOM 内容所花费的时间。页面上的图像、非白色<canvas>元素和 SVG 被视为 DOM 内容；iframe 内部不包含任何内容。<br>获得更高的 FCP 分数的最佳方法之一是使用代码拆分。代码拆分是一种在传输开始时仅将必要的模块发送给用户的技术。通过减小最初发送的载荷大小，这将极大地影响 FCP 分数。<br>流行的模块打包器（例如 webpack）可为你提供代码拆分功能。你还可以利用原生 ES 模块来单独加载各个模块。你可以在此处详细了解有关原生 ES 模块的信息。</p>
<p><a target="_blank" rel="noopener" href="https://blog.bitsrc.io/understanding-es-modules-in-javascript-a28fec420f73">https://blog.bitsrc.io/understanding-es-modules-in-javascript-a28fec420f73</a></p>
<h3 id="13、使用-async-和-defer"><a href="#13、使用-async-和-defer" class="headerlink" title="13、使用 async 和 defer"></a>13、使用 async 和 defer</h3><p>在现代网站中，脚本比 HTML 更为密集，其大小更大且消耗更多的处理时间。默认情况下，浏览器必须等待脚本下载和执行完毕后，再处理页面的其余部分。<br>于是笨重的脚本可能会阻止网页的加载。为了避免这种情况，JavaScript 为我们提供了两种分别称为 async 和 defer 的技术。你只需将这些属性添加到<script>标记中即可。<br>Async 会让浏览器在不影响渲染的情况下加载脚本。换句话说，页面不会等待 async 脚本，而是先处理和显示内容。<br>Defer 是让浏览器在渲染完成后加载脚本。如果同时指定它们两者，则 async 在现代浏览器上更优先，而支持 defer 但不支持 async 的老式浏览器将回退为 defer。<br>这两个属性可以帮助你大幅减少页面加载时间。我强烈建议你阅读 Flavio 的这篇博客文章。</p>
<p><a target="_blank" rel="noopener" href="https://flaviocopes.com/javascript-async-defer/">https://flaviocopes.com/javascript-async-defer/</a></p>
<h3 id="14、在后台运行-CPU-密集型任务"><a href="#14、在后台运行-CPU-密集型任务" class="headerlink" title="14、在后台运行 CPU 密集型任务"></a>14、在后台运行 CPU 密集型任务</h3><p>可以使用 Web Worker 在后台线程中运行脚本。如果你有一些高强度的任务，可以将它们分配给 Web Worker，这些 WebWorker 可以在不干扰用户界面的情况下运行它们。创建后，Web Worker 可以将消息发布到该代码指定的事件处理程序来与 JavaScript 代码通信，反之亦然。<br>要了解有关 Web Worker 的更多信息，建议你阅读 MDN 文档：</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers">https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers</a></p>
<p>延伸阅读</p>
<p><a target="_blank" rel="noopener" href="https://blog.bitsrc.io/14-javascript-code-optimization-tips-for-front-end-developers-a44763d3a0da">https://blog.bitsrc.io/14-javascript-code-optimization-tips-for-front-end-developers-a44763d3a0da</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/20/JS%E4%BC%98%E5%8C%96/" data-id="ckmn4ygpq000gpst7gxbud7qo" data-title="$JS优化" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/JS/" rel="tag">JS</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-(组件)获取用户ip地址" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/01/(%E7%BB%84%E4%BB%B6)%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7ip%E5%9C%B0%E5%9D%80/" class="article-date">
  <time class="dt-published" datetime="2020-08-31T19:03:03.000Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BB%84%E4%BB%B6/">组件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/09/01/(%E7%BB%84%E4%BB%B6)%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7ip%E5%9C%B0%E5%9D%80/">(组件)获取用户ip地址</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="调用搜狐接口获取用户ip地址"><a href="#调用搜狐接口获取用户ip地址" class="headerlink" title="调用搜狐接口获取用户ip地址"></a>调用搜狐接口获取用户ip地址</h4><p>示例：</p>
<p><img src="https://beingyo.github.io/img/(%E7%BB%84%E4%BB%B6)%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7ip%E5%9C%B0%E5%9D%80-1.png" alt="(组件)获取用户ip地址-1.png"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 100%&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;width: 1000px;text-align: left;margin: 0 auto;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">remote-js</span> <span class="attr">src</span>=<span class="string">&quot;http://pv.sohu.com/cityjson?ie=utf-8&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">remote-js</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">el-button</span> @<span class="attr">click</span>=<span class="string">&quot;getIp&quot;</span>&gt;</span>获取ip<span class="tag">&lt;/<span class="name">el-button</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">p</span>&gt;</span>获取到的用户ip地址：&#123;&#123; ip &#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span><br><span class="line">  components: &#123;</span><br><span class="line"><span class="javascript">    <span class="string">&#x27;remote-js&#x27;</span>: &#123; <span class="comment">// 获取用户ip</span></span></span><br><span class="line">      render (createElement) &#123;</span><br><span class="line"><span class="javascript">        <span class="keyword">return</span> createElement(<span class="string">&#x27;script&#x27;</span>, &#123;<span class="attr">attrs</span>: &#123;<span class="attr">type</span>: <span class="string">&#x27;text/javascript&#x27;</span>, <span class="attr">src</span>: <span class="built_in">this</span>.src&#125;&#125;)</span></span><br><span class="line">      &#125;,</span><br><span class="line">      props: &#123;</span><br><span class="line"><span class="javascript">        src: &#123;<span class="attr">type</span>: <span class="built_in">String</span>, <span class="attr">required</span>: <span class="literal">true</span>&#125;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  data () &#123;</span><br><span class="line"><span class="javascript">    <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="javascript">      ip: <span class="string">&#x27;&#x27;</span></span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line"><span class="javascript">    <span class="comment">// this.getIp()</span></span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getIp () &#123;</span><br><span class="line"><span class="javascript">      <span class="comment">// eslint-disable-next-line no-undef</span></span></span><br><span class="line"><span class="javascript">      <span class="built_in">this</span>.ip = returnCitySN[<span class="string">&#x27;cip&#x27;</span>]</span></span><br><span class="line"><span class="javascript">      <span class="built_in">console</span>.log(<span class="string">&#x27;用户的ip地址：&#x27;</span> + <span class="built_in">this</span>.ip)</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css">  <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="css">    <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/01/(%E7%BB%84%E4%BB%B6)%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7ip%E5%9C%B0%E5%9D%80/" data-id="ckmn7un3n0005fgt7e1zi3ptg" data-title="(组件)获取用户ip地址" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-(组件)更新时间线" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/01/(%E7%BB%84%E4%BB%B6)%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E7%BA%BF/" class="article-date">
  <time class="dt-published" datetime="2020-08-31T18:02:02.000Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BB%84%E4%BB%B6/">组件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/09/01/(%E7%BB%84%E4%BB%B6)%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E7%BA%BF/">(组件)更新时间线</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h4 id="记录曾经需求实现的软件更新时间线demo，代码稀烂，仅为记录"><a href="#记录曾经需求实现的软件更新时间线demo，代码稀烂，仅为记录" class="headerlink" title="记录曾经需求实现的软件更新时间线demo，代码稀烂，仅为记录"></a>记录曾经需求实现的软件更新时间线demo，代码稀烂，仅为记录</h4><p>GitHub项目Demo地址：<a target="_blank" rel="noopener" href="https://github.com/Beingyo/vue-test-template">https://github.com/Beingyo/vue-test-template</a></p>
<p>示例：</p>
<p><img src="https://beingyo.github.io/img/(%E7%BB%84%E4%BB%B6)%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E7%BA%BF-1.png" alt="(组件)更新时间线-1.png"></p>
<p>代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--版本更新--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-body&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;year in data.year&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-if</span>=<span class="string">&quot;year.status&quot;</span> <span class="attr">class</span>=<span class="string">&quot;update-year&quot;</span>&gt;</span></span><br><span class="line">          &#123;&#123; year.date &#125;&#125;</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex-left&quot;</span>&gt;</span></span><br><span class="line">            &#123;&#123; year.time &#125;&#125;</span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex-center&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;vertical-hr&quot;</span>/&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex-right&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-content&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arrow-under&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arrow-top&quot;</span>/&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-content-font&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-for</span>=<span class="string">&quot;content in year.content&quot;</span>&gt;</span></span><br><span class="line">                  <span class="tag">&lt;<span class="name">span</span>&gt;</span>&#123;&#123; content.text &#125;&#125;<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">h3</span>&gt;</span>具体使用方法可参考文档&amp;nbsp<span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;color: #d7b759&quot;</span> <span class="attr">v-html</span>=<span class="string">&quot;year.url&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-bottom&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex-left&quot;</span>&gt;</span></span><br><span class="line">          XX月XX日</span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex-center&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;vertical-hr&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-flex-right&quot;</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-content&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arrow-under&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;arrow-top&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;update-content-font&quot;</span>&gt;</span></span><br><span class="line">              <span class="tag">&lt;<span class="name">h3</span>&gt;</span>企士宝隆重正式上线！<span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">&#x27;Index&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                data: &#123;</span><br><span class="line">                    year: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            status: <span class="number">1</span>,</span><br><span class="line">                            date: <span class="string">&#x27;2020&#x27;</span>,</span><br><span class="line">                            time: <span class="string">&#x27;05月07日&#x27;</span>,</span><br><span class="line">                            content: [</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;1.XXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;2.XXXXXXXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;3.XXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;4.XXXXX&#x27;</span> &#125;</span><br><span class="line">                            ],</span><br><span class="line">                            url: <span class="string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;2020-05-07更新详解&lt;/a&gt;&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            status: <span class="number">0</span>,</span><br><span class="line">                            date: <span class="string">&#x27;2020&#x27;</span>,</span><br><span class="line">                            time: <span class="string">&#x27;05月02日&#x27;</span>,</span><br><span class="line">                            content: [</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;1.XXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;2.XXXXXXXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;3.XXXXXXXX&#x27;</span> &#125;</span><br><span class="line">                            ],</span><br><span class="line">                            url: <span class="string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;2020-05-02更新详解&lt;/a&gt;&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            status: <span class="number">0</span>,</span><br><span class="line">                            date: <span class="string">&#x27;2020&#x27;</span>,</span><br><span class="line">                            time: <span class="string">&#x27;04月15日&#x27;</span>,</span><br><span class="line">                            content: [</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;1.选项类字段支持颜色设置&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;2.表单填写复用上次提交内容优化&#x27;</span> &#125;</span><br><span class="line">                            ],</span><br><span class="line">                            url: <span class="string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;2020-04-15更新详解&lt;/a&gt;&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            status: <span class="number">1</span>,</span><br><span class="line">                            date: <span class="string">&#x27;2019&#x27;</span>,</span><br><span class="line">                            time: <span class="string">&#x27;11月05日&#x27;</span>,</span><br><span class="line">                            content: [</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;1.XXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;2.XXXXXXXXXXXX&#x27;</span> &#125;</span><br><span class="line">                            ],</span><br><span class="line">                            url: <span class="string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;2019-11-05更新详解&lt;/a&gt;&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            status: <span class="number">0</span>,</span><br><span class="line">                            date: <span class="string">&#x27;2019&#x27;</span>,</span><br><span class="line">                            time: <span class="string">&#x27;10月20日&#x27;</span>,</span><br><span class="line">                            content: [</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;1.XXXXXXXX&#x27;</span> &#125;</span><br><span class="line">                            ],</span><br><span class="line">                            url: <span class="string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;2019-10-20更新详解&lt;/a&gt;&#x27;</span></span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            status: <span class="number">0</span>,</span><br><span class="line">                            date: <span class="string">&#x27;2019&#x27;</span>,</span><br><span class="line">                            time: <span class="string">&#x27;10月01日&#x27;</span>,</span><br><span class="line">                            content: [</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;1.XXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;2.XXXXXXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;3.XXXXXXXXXXXXXXXX&#x27;</span> &#125;,</span><br><span class="line">                                &#123; <span class="attr">text</span>: <span class="string">&#x27;4.XXXXXXXX&#x27;</span> &#125;</span><br><span class="line">                            ],</span><br><span class="line">                            url: <span class="string">&#x27;&lt;a href=&quot;https://www.baidu.com&quot;&gt;2019-10-01更新详解&lt;/a&gt;&#x27;</span></span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped lang=&quot;scss&quot;&gt;</span><br><span class="line">  <span class="selector-class">.update-body</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line">    <span class="attribute">padding-top</span>: <span class="number">30px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.update-year</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">96px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">96px</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">      <span class="attribute">background</span>: -webkit-gradient(linear, left top, right bottom, from(<span class="number">#78ca5a</span>), to(<span class="number">#c6ebac</span>));</span><br><span class="line">      <span class="attribute">line-height</span>: <span class="number">96px</span>;</span><br><span class="line">      <span class="attribute">text-align</span>: center;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">28px</span>;</span><br><span class="line">      <span class="attribute">margin-left</span>: <span class="number">58px</span>;</span><br><span class="line">      <span class="attribute">color</span>: <span class="number">#fafafa</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  .update-flex &#123;</span><br><span class="line">    width: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.update-flex-left</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">119px</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">      <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">      <span class="attribute">margin</span>: <span class="number">70px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.update-flex-center</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">1px</span>;</span><br><span class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#cccccc</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.vertical-hr</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">9px</span>;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#78ca5a</span>;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> <span class="number">#c6ebac</span>;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">80px</span> <span class="number">0</span> <span class="number">0</span> -<span class="number">5px</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.update-flex-right</span> &#123;</span><br><span class="line">      <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.arrow-under</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">12px</span> solid;</span><br><span class="line">        <span class="attribute">border-color</span>: transparent <span class="number">#cccccc</span> transparent transparent;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">30px</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.arrow-top</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">8px</span> solid;</span><br><span class="line">        <span class="attribute">border-color</span>: transparent <span class="number">#ffffff</span> transparent transparent;</span><br><span class="line">        <span class="attribute">position</span>: absolute;</span><br><span class="line">        <span class="attribute">right</span>: <span class="number">100%</span>;</span><br><span class="line">        <span class="attribute">top</span>: <span class="number">34px</span></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      .update-content &#123;</span><br><span class="line">        position: relative;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">40px</span>;</span><br><span class="line">        <span class="attribute">margin-left</span>: <span class="number">30px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span> <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">850px</span>;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">        <span class="attribute">font-family</span>: sans-serif;</span><br><span class="line">        <span class="attribute">border</span>: <span class="number">3px</span> solid <span class="number">#cccccc</span>;</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.update-content-font</span> &#123;</span><br><span class="line">          <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line">          <span class="attribute">color</span>: black;</span><br><span class="line">          <span class="attribute">letter-spacing</span>: <span class="number">1px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="selector-class">.update-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> auto;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.update-flex</span> &#123;</span><br><span class="line">      <span class="selector-class">.update-flex-center</span> &#123;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">90px</span>;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.update-flex-right</span> &#123;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">14px</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.update-content</span> &#123;</span><br><span class="line">          <span class="attribute">margin-bottom</span>: <span class="number">80px</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.arrow-under</span> &#123;</span><br><span class="line">          <span class="attribute">top</span>: <span class="number">18px</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .arrow-top &#123;</span><br><span class="line">          top: <span class="number">22px</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/01/(%E7%BB%84%E4%BB%B6)%E6%9B%B4%E6%96%B0%E6%97%B6%E9%97%B4%E7%BA%BF/" data-id="ckmn7un3m0004fgt7apqq18xl" data-title="(组件)更新时间线" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-11" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/01/11/" class="article-date">
  <time class="dt-published" datetime="2020-08-31T18:02:02.000Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BB%84%E4%BB%B6/">组件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/09/01/11/">el-upload重写</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;el-upload</span><br><span class="line">      :show-file-list=<span class="string">&quot;false&quot;</span></span><br><span class="line">      :on-change=<span class="string">&quot;onchange&quot;</span></span><br><span class="line">      :before-upload=<span class="string">&quot;beforeAvatarUpload&quot;</span></span><br><span class="line">      action=<span class="string">&quot;1&quot;</span>&gt;</span><br><span class="line">      &lt;i <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;el-icon-plus avatar-uploader-icon&quot;</span>/&gt;</span><br><span class="line">    &lt;/el-upload&gt;</span><br><span class="line">    &lt;el-button style=<span class="string">&quot;font-size: 16px;color: black;&quot;</span> plain @click=<span class="string">&quot;upload&quot;</span>&gt;上传&lt;/el-button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;!--</span><br><span class="line">element 框架 api 写法</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">postpicture</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> request(&#123;</span><br><span class="line">    url: <span class="string">&#x27;file-center/v1/form/file/upload&#x27;</span>,</span><br><span class="line">    method: <span class="string">&#x27;post&#x27;</span>,</span><br><span class="line">    data: data,</span><br><span class="line">    headers: &#123; <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;multipart/form-data&#x27;</span> &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        name: <span class="string">&#x27;Index&#x27;</span>,</span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">              flage: <span class="number">0</span>,</span><br><span class="line">              imageUrl: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">              picture: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            <span class="function"><span class="title">onchange</span>(<span class="params">file, fileList</span>)</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> _this = <span class="built_in">this</span></span><br><span class="line">                <span class="keyword">var</span> event = event || <span class="built_in">window</span>.event</span><br><span class="line">                <span class="keyword">var</span> reader = <span class="keyword">new</span> FileReader()</span><br><span class="line">                file = event.target.files[<span class="number">0</span>]</span><br><span class="line">                <span class="comment">// 转base64</span></span><br><span class="line">                reader.onload = <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">if</span> (_this.flag === <span class="number">1</span>) &#123;</span><br><span class="line">                        _this.imageUrl = e.target.result <span class="comment">// 将图片路径赋值给src</span></span><br><span class="line">                        <span class="keyword">const</span> image = <span class="keyword">new</span> Image()</span><br><span class="line">                        image.onload = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                            <span class="keyword">const</span> width = image.width</span><br><span class="line">                            <span class="keyword">const</span> height = image.height</span><br><span class="line">                            <span class="built_in">console</span>.log(<span class="string">&#x27;参数 宽高：&#x27;</span> + width + <span class="string">&#x27;x&#x27;</span> + height)</span><br><span class="line">                        &#125;</span><br><span class="line">                        image.src = e.target.result</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="built_in">this</span>.picture = file</span><br><span class="line">                reader.readAsDataURL(file)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">beforeAvatarUpload</span>(<span class="params">file</span>)</span> &#123;</span><br><span class="line">                <span class="built_in">this</span>.flag = <span class="number">0</span></span><br><span class="line">                <span class="keyword">const</span> isJPG = file.type === <span class="string">&#x27;image/jpeg&#x27;</span></span><br><span class="line">                <span class="keyword">const</span> isPNG = file.type === <span class="string">&#x27;image/png&#x27;</span></span><br><span class="line">                <span class="keyword">const</span> isLt20M = file.size / <span class="number">1024</span> / <span class="number">1024</span> &lt; <span class="number">20</span></span><br><span class="line">                <span class="built_in">this</span>.size = (file.size / <span class="number">1024</span> / <span class="number">1024</span>).toFixed(<span class="number">2</span>) + <span class="string">&#x27;M&#x27;</span></span><br><span class="line">                <span class="keyword">if</span> (isJPG) &#123;</span><br><span class="line">                    <span class="built_in">this</span>.flag = <span class="number">1</span></span><br><span class="line">                    <span class="built_in">this</span>.type = <span class="string">&#x27;jpg&#x27;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isPNG) &#123;</span><br><span class="line">                    <span class="built_in">this</span>.flag = <span class="number">1</span></span><br><span class="line">                    <span class="built_in">this</span>.type = <span class="string">&#x27;png&#x27;</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">this</span>.$message.error(<span class="string">&#x27;上传图片只能是 JPG或PNG 格式!&#x27;</span>)</span><br><span class="line">                    <span class="built_in">this</span>.flag = <span class="number">0</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (!isLt20M) &#123;</span><br><span class="line">                    <span class="built_in">this</span>.$message.error(<span class="string">&#x27;上传图片大小不能超过 20MB!&#x27;</span>)</span><br><span class="line">                    <span class="built_in">this</span>.flag = <span class="number">0</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">upload</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> fd = <span class="keyword">new</span> FormData()</span><br><span class="line">                fd.append(<span class="string">&#x27;file&#x27;</span>, <span class="built_in">this</span>.picture)</span><br><span class="line">                <span class="comment">// fd.append(&#x27;name&#x27;, &#x27;测试图片&#x27;)</span></span><br><span class="line">                <span class="built_in">console</span>.log(fd)</span><br><span class="line">                postpicture(fd).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(res.data))</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/01/11/" data-id="ckmn7un3v000lfgt71h21cjrv" data-title="el-upload重写" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-12" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/01/12/" class="article-date">
  <time class="dt-published" datetime="2020-08-31T18:02:02.000Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BB%84%E4%BB%B6/">组件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/09/01/12/">el-tree选中，触摸，弹出图标等</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;employee&quot;</span>&gt;</span><br><span class="line">    &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;left&quot;</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;tree&quot;</span>&gt;</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">          &lt;el-tree</span><br><span class="line">            :data=<span class="string">&quot;data&quot;</span></span><br><span class="line">            :expand-on-click-node=<span class="string">&quot;false&quot;</span></span><br><span class="line">            :props=<span class="string">&quot;defaultProps&quot;</span></span><br><span class="line">            node-key=<span class="string">&quot;deptId&quot;</span></span><br><span class="line">            <span class="keyword">default</span>-expand-all</span><br><span class="line">            @node-click=<span class="string">&quot;setUserData&quot;</span></span><br><span class="line">          &gt;</span><br><span class="line">            &lt;span slot-scope=<span class="string">&quot;&#123; node, data &#125;&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;custom-tree-node&quot;</span> @mouseover=<span class="string">&quot;toggleShow(data)&quot;</span> @mouseout=<span class="string">&quot;togglenoShow(data)&quot;</span>&gt;</span><br><span class="line">              &lt;span&gt;&#123;&#123; node.label &#125;&#125;&lt;/span&gt;</span><br><span class="line">              &lt;span v-<span class="keyword">if</span>=<span class="string">&quot;data.deptId === clickIndex || overIndex === data.deptId&quot;</span>&gt;</span><br><span class="line">                &lt;el-popover</span><br><span class="line">                  v-model=<span class="string">&quot;data.visible&quot;</span></span><br><span class="line">                  placement=<span class="string">&quot;bottom&quot;</span></span><br><span class="line">                  width=<span class="string">&quot;200&quot;</span></span><br><span class="line">                  @hide=<span class="string">&quot;cancelDepartmen(data)&quot;</span>&gt;</span><br><span class="line">                  &lt;div v-<span class="keyword">if</span>=<span class="string">&quot;type == 1&quot;</span>&gt;</span><br><span class="line">                    &lt;div @click=<span class="string">&quot;editDepartmentName(data)&quot;</span>&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;<span class="xml"><span class="tag">&lt;<span class="name">span</span> &gt;</span>修改名称<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&lt;/el-dropdown-item&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div @click=<span class="string">&quot;addDepartmentName(data)&quot;</span>&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;<span class="xml"><span class="tag">&lt;<span class="name">span</span> &gt;</span>添加子部门<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&lt;/el-dropdown-item&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div v-<span class="keyword">if</span>=<span class="string">&quot;data.deptId != 1&quot;</span> @click=<span class="string">&quot;deleteDepartmentName(data)&quot;</span>&gt;</span><br><span class="line">                      &lt;el-dropdown-item&gt;<span class="xml"><span class="tag">&lt;<span class="name">span</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span>&lt;/el-dropdown-item&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;div v-<span class="keyword">if</span>=<span class="string">&quot;type == 2 || type == 3&quot;</span>&gt;</span><br><span class="line">                    &lt;el-form ref=<span class="string">&quot;ruleForm&quot;</span> :model=<span class="string">&quot;ruleForm&quot;</span> :rules=<span class="string">&quot;rules&quot;</span> &gt;</span><br><span class="line">                      &lt;el-form-item prop=<span class="string">&quot;deptName&quot;</span>&gt;</span><br><span class="line">                        &lt;el-input v-model=<span class="string">&quot;ruleForm.deptName&quot;</span>/&gt;</span><br><span class="line">                      &lt;/el-form-item&gt;</span><br><span class="line">                    &lt;/el-form&gt;</span><br><span class="line">                    &lt;el-button @click=<span class="string">&quot;addsub(data)&quot;</span>&gt;确定&lt;/el-button&gt;</span><br><span class="line">                    &lt;el-button @click=<span class="string">&quot;cancelDepartmen(data)&quot;</span>&gt;取消&lt;/el-button&gt;</span><br><span class="line">                  &lt;/div&gt;</span><br><span class="line">                  &lt;el-button slot=<span class="string">&quot;reference&quot;</span> type=<span class="string">&quot;text&quot;</span> icon=<span class="string">&quot;el-icon-more&quot;</span> @click=<span class="string">&quot;tools(data)&quot;</span>/&gt;</span><br><span class="line">                &lt;/el-popover&gt;</span><br><span class="line">              &lt;/span&gt;</span><br><span class="line">            &lt;/span&gt;</span><br><span class="line">          &lt;/el-tree&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    name: <span class="string">&#x27;Employee&#x27;</span>,</span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        data: [&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">0</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">1</span>,<span class="string">&quot;sub&quot;</span>:[&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门1&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">2</span>,<span class="string">&quot;sub&quot;</span>:[&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门1-2&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">2</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">7</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门1/部门1-2&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门1&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,2,7&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门1-1&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">2</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">6</span>,<span class="string">&quot;sub&quot;</span>:[&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门1-1-1&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">6</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">12</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门1/部门1-1/部门1-1-1&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门1-1&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,2,6,12&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门1-1-2&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">6</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">13</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门1/部门1-1/部门1-1-2&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门1-1&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,2,6,13&quot;</span>&#125;],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门1/部门1-1&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门1&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,2,6&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门1-3&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">2</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">8</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门1/部门1-3&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门1&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,2,8&quot;</span>&#125;],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门1&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,2&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门2&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">3</span>,<span class="string">&quot;sub&quot;</span>:[&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门2-1&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">3</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">9</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门2/部门2-1&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门2&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,3,9&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门2-2&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">3</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">10</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门2/部门2-2&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门2&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,3,10&quot;</span>&#125;],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门2&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,3&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门3&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">4</span>,<span class="string">&quot;sub&quot;</span>:[&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门3-1&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">4</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">11</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门3/部门3-1&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;部门3&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,4,11&quot;</span>&#125;],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门3&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,4&quot;</span>&#125;,&#123;<span class="string">&quot;deptName&quot;</span>:<span class="string">&quot;部门4&quot;</span>,<span class="string">&quot;deptStatus&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptParentId&quot;</span>:<span class="number">1</span>,<span class="string">&quot;deptId&quot;</span>:<span class="number">5</span>,<span class="string">&quot;sub&quot;</span>:[],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士/部门4&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;showName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1,5&quot;</span>&#125;],<span class="string">&quot;struct&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;parentName&quot;</span>:<span class="literal">null</span>,<span class="string">&quot;showName&quot;</span>:<span class="string">&quot;富士&quot;</span>,<span class="string">&quot;origin&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;],</span><br><span class="line">        <span class="comment">// 左侧成员树</span></span><br><span class="line">        defaultProps: &#123; <span class="attr">children</span>: <span class="string">&#x27;sub&#x27;</span>, <span class="attr">label</span>: <span class="string">&#x27;deptName&#x27;</span> &#125;,</span><br><span class="line">        type: <span class="string">&#x27;1&#x27;</span>, <span class="comment">// 1 显示点击左侧小点弹出的表单， 2 显示修改名称时弹出的表单</span></span><br><span class="line">        clickIndex: <span class="string">&#x27;-1&#x27;</span>, <span class="comment">// 控制点击左侧出现圆点按钮</span></span><br><span class="line">        overIndex: <span class="string">&#x27;-1&#x27;</span>, <span class="comment">// 控制触摸左侧出现圆点按钮</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      <span class="comment">// 点击部门获取用户数据</span></span><br><span class="line">      <span class="function"><span class="title">setUserData</span>(<span class="params">val</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.clickIndex = val.deptId</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 左侧鼠标触摸</span></span><br><span class="line">      <span class="function"><span class="title">toggleShow</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.overIndex = item.deptId</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 左侧鼠标离开</span></span><br><span class="line">      <span class="function"><span class="title">togglenoShow</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.overIndex = <span class="string">&#x27;-1&#x27;</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 点击圆点按钮</span></span><br><span class="line">      <span class="function"><span class="title">tools</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">        item.visible = <span class="literal">true</span></span><br><span class="line">        <span class="comment">// this.overIndex = data.deptId</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 左侧取消按钮</span></span><br><span class="line">      <span class="function"><span class="title">cancelDepartmen</span>(<span class="params">data</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.type = <span class="string">&#x27;1&#x27;</span></span><br><span class="line">        data.visible = <span class="literal">false</span></span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 添加部门</span></span><br><span class="line">      <span class="function"><span class="title">addsub</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 修改部门名</span></span><br><span class="line">      <span class="function"><span class="title">editDepartmentName</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.type = <span class="number">2</span></span><br><span class="line">        <span class="built_in">this</span>.ruleForm.deptName = item.deptName</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 添加子部门</span></span><br><span class="line">      <span class="function"><span class="title">addDepartmentName</span>(<span class="params">item</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.type = <span class="number">3</span></span><br><span class="line">        <span class="built_in">this</span>.ruleForm.deptName = <span class="string">&#x27;&#x27;</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=<span class="string">&quot;scss&quot;</span> scoped&gt;</span><br><span class="line">  /deep/.el-tree-node__content:hover&#123;</span><br><span class="line">    background: #fbf9ed;</span><br><span class="line">  &#125;</span><br><span class="line">  /deep/.is-current&gt;.el-tree-node__content&#123;</span><br><span class="line">    background: #fbf9ed;</span><br><span class="line">    position: relative;</span><br><span class="line">  &#125;</span><br><span class="line">  .employee&#123;</span><br><span class="line">    display: flex;</span><br><span class="line">    flex-direction: row;</span><br><span class="line">    background-color: #efefef;</span><br><span class="line">    .left&#123;</span><br><span class="line">      width: calc(<span class="number">15</span>% - 10px);</span><br><span class="line">      height: 800px;</span><br><span class="line">      white-space:nowrap;</span><br><span class="line">      overflow-y:auto;</span><br><span class="line">      overflow-x:auto;</span><br><span class="line">      background-color: #ffffff;</span><br><span class="line">      .tree&#123;</span><br><span class="line">        padding: 20px;</span><br><span class="line">        min-width: max-content;</span><br><span class="line">        .custom-tree-node&#123;</span><br><span class="line">          flex: <span class="number">1</span>;</span><br><span class="line">          <span class="comment">/*display: flex;*/</span></span><br><span class="line">          <span class="comment">/*align-items: center;*/</span></span><br><span class="line">          justify-content: space-between;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/01/12/" data-id="ckmn7un3w000nfgt76n3l8nvq" data-title="el-tree选中，触摸，弹出图标等" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-13" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/09/01/13/" class="article-date">
  <time class="dt-published" datetime="2020-08-31T18:02:02.000Z" itemprop="datePublished">2020-09-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E7%BB%84%E4%BB%B6/">组件</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2020/09/01/13/">el-table表格头触摸显示</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;el-table</span><br><span class="line">    :data=<span class="string">&quot;tableData&quot;</span></span><br><span class="line">    style=<span class="string">&quot;width: 100%&quot;</span>&gt;</span><br><span class="line">    &lt;el-table-column</span><br><span class="line">      label=<span class="string">&quot;Date&quot;</span></span><br><span class="line">      prop=<span class="string">&quot;date&quot;</span>&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column</span><br><span class="line">      label=<span class="string">&quot;Name&quot;</span></span><br><span class="line">      prop=<span class="string">&quot;name&quot;</span>&gt;</span><br><span class="line">      &lt;template slot=<span class="string">&quot;header&quot;</span> slot-scope=<span class="string">&quot;scope&quot;</span>   &gt;</span><br><span class="line">        &lt;div @mouseover=<span class="string">&quot;show&quot;</span> @mouseout=<span class="string">&quot;hide&quot;</span>&gt;</span><br><span class="line">          &lt;i&gt;Name&lt;/i&gt;</span><br><span class="line">          &lt;i v-show=<span class="string">&quot;te1&quot;</span>  @click=<span class="string">&quot;test1&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;el-icon-delete&quot;</span>/&gt;</span><br><span class="line">          &lt;i v-show=<span class="string">&quot;te2&quot;</span> @click=<span class="string">&quot;test2&quot;</span> <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;el-icon-edit&quot;</span>/&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">    &lt;el-table-column&gt;</span><br><span class="line">      &lt;template slot-scope=<span class="string">&quot;scope&quot;</span>&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          size=<span class="string">&quot;mini&quot;</span></span><br><span class="line">          @click=<span class="string">&quot;handleEdit(scope.$index, scope.row)&quot;</span>&gt;Edit&lt;/el-button&gt;</span><br><span class="line">        &lt;el-button</span><br><span class="line">          size=<span class="string">&quot;mini&quot;</span></span><br><span class="line">          type=<span class="string">&quot;danger&quot;</span></span><br><span class="line">          @click=<span class="string">&quot;handleDelete(scope.$index, scope.row)&quot;</span>&gt;Delete&lt;/el-button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/el-table-column&gt;</span><br><span class="line">  &lt;/el-table&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">        props:[<span class="string">&#x27;id&#x27;</span>],</span><br><span class="line">        <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">this</span>.id)</span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            <span class="string">&#x27;$route&#x27;</span> (to,<span class="keyword">from</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="built_in">this</span>.id)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// beforeRouteUpdate(to,from,next)&#123;</span></span><br><span class="line">        <span class="comment">//     console.log(this.id)</span></span><br><span class="line">        <span class="comment">//     next()</span></span><br><span class="line">        <span class="comment">// &#125;,</span></span><br><span class="line">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">                te1: <span class="literal">false</span>,</span><br><span class="line">                te2: <span class="literal">false</span>,</span><br><span class="line">                tableData: [&#123;</span><br><span class="line">                    date: <span class="string">&#x27;2016-05-02&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;王小虎&#x27;</span>,</span><br><span class="line">                    address: <span class="string">&#x27;上海市普陀区金沙江路 1518 弄&#x27;</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    date: <span class="string">&#x27;2016-05-04&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;王小虎&#x27;</span>,</span><br><span class="line">                    address: <span class="string">&#x27;上海市普陀区金沙江路 1517 弄&#x27;</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    date: <span class="string">&#x27;2016-05-01&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;王小虎&#x27;</span>,</span><br><span class="line">                    address: <span class="string">&#x27;上海市普陀区金沙江路 1519 弄&#x27;</span></span><br><span class="line">                &#125;, &#123;</span><br><span class="line">                    date: <span class="string">&#x27;2016-05-03&#x27;</span>,</span><br><span class="line">                    name: <span class="string">&#x27;王小虎&#x27;</span>,</span><br><span class="line">                    address: <span class="string">&#x27;上海市普陀区金沙江路 1516 弄&#x27;</span></span><br><span class="line">                &#125;],</span><br><span class="line">                search: <span class="string">&#x27;&#x27;</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            <span class="function"><span class="title">test1</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;编辑&quot;</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">test2</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;删除&quot;</span>)</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">show</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;显示&quot;</span>)</span><br><span class="line">                <span class="built_in">this</span>.te1 = <span class="literal">true</span></span><br><span class="line">                <span class="built_in">this</span>.te2 = <span class="literal">true</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">hide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">&quot;隐藏&quot;</span>)</span><br><span class="line">                <span class="built_in">this</span>.te1 = <span class="literal">false</span></span><br><span class="line">                <span class="built_in">this</span>.te2 = <span class="literal">false</span></span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">handleEdit</span>(<span class="params">index, row</span>)</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(index, row);</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="function"><span class="title">handleDelete</span>(<span class="params">index, row</span>)</span> &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(index, row);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/09/01/13/" data-id="ckmn7un3x000pfgt7fcr0gvh8" data-title="el-table表格头触摸显示" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/CSS/">CSS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JS/">JS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/NPM/">NPM</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Vue/">Vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E4%BC%A0%E5%8F%82/">传参</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E5%9D%91/">坑</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%BB%84%E4%BB%B6/">组件</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSS/" rel="tag">CSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JS/" rel="tag">JS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NPM/" rel="tag">NPM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/UI/" rel="tag">UI</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Vue/" rel="tag">Vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/axios/" rel="tag">axios</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/element/" rel="tag">element</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BC%A0%E5%8F%82/" rel="tag">传参</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9D%91/" rel="tag">坑</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%84%E4%BB%B6/" rel="tag">组件</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSS/" style="font-size: 15.71px;">CSS</a> <a href="/tags/JS/" style="font-size: 17.14px;">JS</a> <a href="/tags/NPM/" style="font-size: 12.86px;">NPM</a> <a href="/tags/UI/" style="font-size: 10px;">UI</a> <a href="/tags/Vue/" style="font-size: 18.57px;">Vue</a> <a href="/tags/axios/" style="font-size: 10px;">axios</a> <a href="/tags/element/" style="font-size: 11.43px;">element</a> <a href="/tags/%E4%BC%A0%E5%8F%82/" style="font-size: 14.29px;">传参</a> <a href="/tags/%E5%9D%91/" style="font-size: 11.43px;">坑</a> <a href="/tags/%E7%BB%84%E4%BB%B6/" style="font-size: 20px;">组件</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/11/(%E8%BD%AC%E8%BD%BD)%E6%95%B4%E7%90%86%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">(转载)整理常用正则表达式</a>
          </li>
        
          <li>
            <a href="/2021/03/05/(%E8%BD%AC%E8%BD%BD)Vue%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/">(转载)Vue依赖注入</a>
          </li>
        
          <li>
            <a href="/2021/01/27/v-html%E5%9B%BE%E7%89%87%E6%BA%A2%E5%87%BA/">v-html图片溢出</a>
          </li>
        
          <li>
            <a href="/2021/01/08/js%E8%8E%B7%E5%8F%96%E8%BF%91%E4%B8%89%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E4%B8%AA%E6%9C%88%E3%80%81%E8%BF%91%E4%B8%80%E5%91%A8/">js获取近三个月、近一个月、近一周</a>
          </li>
        
          <li>
            <a href="/2020/09/20/JS%E4%BC%98%E5%8C%96/">$JS优化</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>